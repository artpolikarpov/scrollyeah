/*! Scrollyeah - v0.3.2 - 2014-04-11
* https://github.com/artpolikarpov/scrollyeah
* Copyright (c) 2014 Artem Polikarpov; Licensed MIT */
!function(a){function b(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,f=0,g=0;return b=a.event.fix(c),b.type="mousewheel",b.wheelDelta&&(e=b.wheelDelta/120),b.detail&&(e=-b.detail/3),g=e,void 0!==c.axis&&c.axis===c.HORIZONTAL_AXIS&&(g=0,f=-1*e),void 0!==c.wheelDeltaY&&(g=c.wheelDeltaY/120),void 0!==c.wheelDeltaX&&(f=-1*c.wheelDeltaX/120),d.unshift(b,e,f,g),a.event.dispatch.apply(this,d)}function c(a){for(var b={},c=0;c<n.length;c++){var d=n[c][0],e=n[c][1];if(a){var f=a.attr("data-"+d);f&&("number"==e?(f=Number(f),isNaN(f)||(b[d]=f)):"boolean"==e?"true"==f?b[d]=!0:(f="false")&&(b[d]=!1):"string"==e&&(b[d]=f))}else b[d]=n[c][2]}return b}function d(a){return{left:a}}function e(b,c){function e(a,b){var c=A-(A-B)/2;return(a-c)*b.data("parallax")}function f(){return!1}function n(a){clearTimeout(a.data("backAnimate"))}function o(a,e,f,g,h){var i=isNaN(e)?0:e;n(a),g&&(i=g,a.data({backAnimate:setTimeout(function(){o(a,e,Math.max(k,f/2),!1,h)},f)})),a.stop().animate(d(i),f,j),!h&&c.triggerScrollyeah&&(clearInterval(G),G=setInterval(function(){b.trigger("scrollyeah",w.position()[K])},25),clearTimeout(H),H=setTimeout(function(){clearInterval(G)},f+100))}function p(a,e,f){return n(e),e.stop(),a===!1&&(a=e.position()[K]),e.css(d(a)),f?void 0:(C=a,c.triggerScrollyeah&&b.trigger("scrollyeah",C),C)}function q(a){x>y?(D=!0,b.addClass("scrollyeah_active"),c.shadows&&(b.addClass("scrollyeah_shadow"),B>=a?b.removeClass("scrollyeah_shadow_no-left").addClass("scrollyeah_shadow_no-right"):a>=A?b.removeClass("scrollyeah_shadow_no-right").addClass("scrollyeah_shadow_no-left"):b.removeClass("scrollyeah_shadow_no-left scrollyeah_shadow_no-right"))):(c.disableIfFit?(D=!1,b.removeClass("scrollyeah_active")):(D=!0,b.addClass("scrollyeah_active")),c.shadows&&b.removeClass("scrollyeah_shadow"))}function r(){x=w.width(),y=b.width(),z=b.height(),A=c.centerIfFit?Math.max((y-x)/2,0):0,B=Math.min(-(x-y),A),w.data({maxPos:A,minPos:B}),B>C&&p(B,w),C>A&&p(A,w),E.each(function(){var b=a(this);p(e(C,b),b,!0)}),q(C)}function s(f,j,k){function l(b){function c(){y=(new Date).getTime(),u=s,v=t,J=[[y,s]],x=p(!1,w),E.each(function(){var b=a(this);p(e(C,b),b,!0)}),f()}if((g||b.which<2)&&D)if(g){if(g&&1==b.targetTouches.length)s=b.targetTouches[0][L],t=b.targetTouches[0][M],c(),w[0].addEventListener("touchmove",o,!1),w[0].addEventListener("touchend",r,!1);else if(g&&b.targetTouches.length>1)return!1}else s=b[L],b.preventDefault(),c(),m.bind("mousemove.scrollyeah",o),m.bind("mouseup.scrollyeah",r)}function n(f,g,h,i){return Math.abs(h)>Math.abs(i)?(f.preventDefault(),clearTimeout(H),I||(p(!1,w),E.each(function(){var b=a(this);p(e(C,b),b,!0)}),I=!0),H=setTimeout(function(){I=!1},100),C-=Math.round(25*h),B>C&&(C=B),C>A&&(C=A),w.css(d(C)),c.triggerScrollyeah&&b.trigger("scrollyeah",C),E.each(function(){var b=a(this);b.css(d(e(C,b)))}),q(C),!1):void 0}function o(f){function h(){f.preventDefault(),z=(new Date).getTime(),J.push([z,s]);var g=u-s;C=x-g,C>A?(C=Math.round(C+(A-C)/1.5),P="left"):B>C?(C=Math.round(C+(B-C)/1.5),P="right"):P=!1,w.css(d(C)),c.triggerScrollyeah&&b.trigger("scrollyeah",C),E.each(function(){var b=a(this);b.css(d(e(C,b)))}),j(C,g,P)}g?g&&1==f.targetTouches.length&&(s=f.targetTouches[0][L],t=f.targetTouches[0][M],O?N&&h():(Math.abs(s-u)-Math.abs(t-v)>=-5&&(N=!0,f.preventDefault()),O=!0)):(s=f[L],h())}function r(a){if(!g||!a.targetTouches.length){N=!1,O=!1,g?(w[0].removeEventListener("touchmove",o,!1),w[0].removeEventListener("touchend",r,!1)):(m.unbind("mouseup.scrollyeah",r),m.unbind("mousemove.scrollyeah",o)),G=(new Date).getTime();var b,c,d,e,f=-C,j=G-h;for(i=0;i<J.length;i++)b=Math.abs(j-J[i][0]),0==i&&(c=b,d=G-J[i][0],e=J[i][1]),c>=b&&(c=b,d=J[i][0],e=J[i][1]);var l=e-s,n=l>=0,p=G-d,q=h>=p,t=G-K,u=n===F;k(f,p,q,t,u,l,a),K=G,F=n}}var s,t,u,v,x,y,z,F,G,H,I,J=[],K=0,N=!1,O=!1,P=!1;g?w[0].addEventListener("touchstart",l,!1):w.mousedown(l).mousewheel(n)}function t(){}function u(c,d){clearTimeout(J),I||(I=!0,w.addClass("scrollyeah__shaft_grabbing")),Math.abs(d)>=5&&!N&&(N=!0,a("a",b).bind("click",f)),q(c)}function v(c,d,g,i,j,l){J=setTimeout(function(){N=!1,a("a",b).unbind("click",f)},h),I=!1,w.removeClass("scrollyeah__shaft_grabbing"),c=-c;var m,n=c,p=2*k;if(c>A)n=A,p/=2;else if(B>c)n=B,p/=2;else if(g){l=-l;var r=l/d;n=Math.round(c+250*r);var s=.04;n>A?(m=Math.abs(n-A),p=Math.abs(p/(250*r/(Math.abs(250*r)-m*(1-s)))),n=A,m=n+m*s):B>n&&(m=Math.abs(n-B),p=Math.abs(p/(250*r/(Math.abs(250*r)-m*(1-s)))),n=B,m=n-m*s)}C=n,n!=c&&(o(w,n,p,m,!1),E.each(function(){var b=a(this);o(b,e(n,b),p,e(m,b),!0)}),q(n))}b.data({ini:!0}).wrapInner('<div class="scrollyeah__wrap"><div class="scrollyeah__shaft"></div></div>');var w=(a(".scrollyeah__wrap",b).css({width:c.maxWidth}),a(".scrollyeah__shaft",b));if(c.shadows){a('<i class="scrollyeah__shadow scrollyeah__shadow_prev"></i><i class="scrollyeah__shadow scrollyeah__shadow_next"></i>').appendTo(b)}var x,y,z,A,B,C=0,D=!0,E=a(".scrollyeah__parallax",w),F=a(".scrollyeah__disable",w);E.each(function(){var b=a(this),c=Number(b.attr("data-parallaxRate"));b.data({parallax:c})});var G,H;r(),l.bind("resize load",r),g&&window.addEventListener("orientationchange",r,!1);var I,J,K="left",L="pageX",M="pageY",N=!1;s(t,u,v),F.bind("click mousedown mouseup mousemove",function(a){a.stopPropagation()}).css({"-webkit-user-select":"auto","-moz-user-select":"auto","-o-user-select":"auto","-ms-user-select":"auto","user-select":"auto",cursor:"auto"})}a.extend({bez:function(b){var c="bez_"+a.makeArray(arguments).join("_").replace(".","p");if("function"!=typeof a.easing[c]){var d=function(a,b){var c=[null,null],d=[null,null],e=[null,null],f=function(f,g){return e[g]=3*a[g],d[g]=3*(b[g]-a[g])-e[g],c[g]=1-e[g]-d[g],f*(e[g]+f*(d[g]+f*c[g]))},g=function(a){return e[0]+a*(2*d[0]+3*c[0]*a)},h=function(a){for(var b,c=a,d=0;++d<14&&(b=f(c,0)-a,!(Math.abs(b)<.001));)c-=b/g(c);return c};return function(a){return f(h(a),1)}};a.easing[c]=function(a,c,e,f,g){return f*d([b[0],b[1]],[b[2],b[3]])(c/g)+e}}return c}});var f=["DOMMouseScroll","mousewheel"];a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=f.length;a;)this.addEventListener(f[--a],b,!1);else this.onmousewheel=b},teardown:function(){if(this.removeEventListener)for(var a=f.length;a;)this.removeEventListener(f[--a],b,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}});var g="ontouchstart"in document,h=300,j=a.bez([.1,0,.25,1]),k=333,l=a(window),m=a(document),n=[["maxWidth","number",999999],["shadows","boolean",!0],["disableIfFit","boolean",!0],["centerIfFit","boolean",!1],["triggerScrollyeah","boolean",!1]];a.fn.scrollyeah=function(b){"undefined"==typeof scrollyeahDefaults&&(scrollyeahDefaults={});var d=a.extend(c(),a.extend({},scrollyeahDefaults,b));return this.each(function(){var b=a(this);b.data("ini")||e(b,d)}),this},a(function(){a(".scrollyeah").each(function(){var b=a(this);b.scrollyeah(c(b))})})}(jQuery);